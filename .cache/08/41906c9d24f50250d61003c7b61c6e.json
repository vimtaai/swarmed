{"id":"tLY1","dependencies":[{"name":"C:\\Users\\visno\\Desktop\\zombies\\package.json","includedInParent":true,"mtime":1571085837386},{"name":"../state","loc":{"line":3,"column":22},"parent":"C:\\Users\\visno\\Desktop\\zombies\\src\\stages\\game.ts","resolved":"C:\\Users\\visno\\Desktop\\zombies\\src\\state.ts"},{"name":"../canvas","loc":{"line":4,"column":23},"parent":"C:\\Users\\visno\\Desktop\\zombies\\src\\stages\\game.ts","resolved":"C:\\Users\\visno\\Desktop\\zombies\\src\\canvas.ts"},{"name":"../stage","loc":{"line":5,"column":22},"parent":"C:\\Users\\visno\\Desktop\\zombies\\src\\stages\\game.ts","resolved":"C:\\Users\\visno\\Desktop\\zombies\\src\\stage.ts"},{"name":"./score-screen","loc":{"line":6,"column":29},"parent":"C:\\Users\\visno\\Desktop\\zombies\\src\\stages\\game.ts","resolved":"C:\\Users\\visno\\Desktop\\zombies\\src\\stages\\score-screen.ts"},{"name":"../utils/context","loc":{"line":7,"column":24},"parent":"C:\\Users\\visno\\Desktop\\zombies\\src\\stages\\game.ts","resolved":"C:\\Users\\visno\\Desktop\\zombies\\src\\utils\\context.ts"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0});var e=require(\"../state\"),t=require(\"../canvas\"),a=require(\"../stage\"),r=require(\"./score-screen\"),s=require(\"../utils/context\");exports.GameStage={type:a.StageType.GAME,init:function(){e.state.zombies=[]},render:function(){s.fillBackground(t.background,\"#4dbd33\");for(var a=0,r=e.state.zombies;a<r.length;a++){r[a].render()}e.state.player.render()},next:function(t){e.state.createZombie(t),e.state.player.next(t);for(var a=0,s=e.state.zombies;a<s.length;a++){var n=s[a];if(n.setFacing(e.state.player.coords),n.next(t),n.collidesWith(e.state.player))e.state.player.health-=n.damage,e.state.destroyZombie(n),0===e.state.player.health&&e.state.setStage(r.ScoreScreenStage);else for(var o=0,i=e.state.player.projectiles;o<i.length;o++){var l=i[o];if(n.collidesWith(l)){e.state.destroyZombie(n),e.state.destroyProjectile(l);break}}}},listenForEvents:function(){addEventListener(\"keydown\",function(t){(e.state||e.state.stage.type!==a.StageType.GAME)&&e.state.player.handleKeyDown(t)}),addEventListener(\"keyup\",function(t){(e.state||e.state.stage.type!==a.StageType.GAME)&&e.state.player.handleKeyUp(t)}),addEventListener(\"pointermove\",function(t){(e.state||e.state.stage.type!==a.StageType.GAME)&&e.state.player.handleMouseMove(t)}),addEventListener(\"pointerdown\",function(t){(e.state||e.state.stage.type!==a.StageType.GAME)&&e.state.player.handleClick(t)})}};"},"sourceMaps":{"js":{"mappings":[{"source":"src/stages/game.ts","name":null,"original":{"line":10,"column":13},"generated":{"line":1,"column":0}},{"source":"src/stages/game.ts","name":null,"original":{"line":10,"column":13},"generated":{"line":1,"column":13}},{"source":"src/stages/game.ts","name":null,"original":{"line":10,"column":13},"generated":{"line":1,"column":20}},{"source":"src/stages/game.ts","name":null,"original":{"line":10,"column":13},"generated":{"line":1,"column":35}},{"source":"src/stages/game.ts","name":null,"original":{"line":10,"column":13},"generated":{"line":1,"column":43}},{"source":"src/stages/game.ts","name":null,"original":{"line":10,"column":13},"generated":{"line":1,"column":56}},{"source":"src/stages/game.ts","name":null,"original":{"line":10,"column":13},"generated":{"line":1,"column":57}},{"source":"src/stages/game.ts","name":null,"original":{"line":10,"column":13},"generated":{"line":1,"column":64}},{"source":"src/stages/game.ts","name":null,"original":{"line":4,"column":0},"generated":{"line":1,"column":68}},{"source":"src/stages/game.ts","name":null,"original":{"line":4,"column":0},"generated":{"line":1,"column":72}},{"source":"src/stages/game.ts","name":null,"original":{"line":4,"column":0},"generated":{"line":1,"column":74}},{"source":"src/stages/game.ts","name":null,"original":{"line":4,"column":0},"generated":{"line":1,"column":82}},{"source":"src/stages/game.ts","name":null,"original":{"line":5,"column":0},"generated":{"line":1,"column":94}},{"source":"src/stages/game.ts","name":null,"original":{"line":5,"column":0},"generated":{"line":1,"column":96}},{"source":"src/stages/game.ts","name":null,"original":{"line":5,"column":0},"generated":{"line":1,"column":104}},{"source":"src/stages/game.ts","name":null,"original":{"line":6,"column":0},"generated":{"line":1,"column":117}},{"source":"src/stages/game.ts","name":null,"original":{"line":6,"column":0},"generated":{"line":1,"column":119}},{"source":"src/stages/game.ts","name":null,"original":{"line":6,"column":0},"generated":{"line":1,"column":127}},{"source":"src/stages/game.ts","name":null,"original":{"line":7,"column":0},"generated":{"line":1,"column":139}},{"source":"src/stages/game.ts","name":null,"original":{"line":7,"column":0},"generated":{"line":1,"column":141}},{"source":"src/stages/game.ts","name":null,"original":{"line":7,"column":0},"generated":{"line":1,"column":149}},{"source":"src/stages/game.ts","name":null,"original":{"line":8,"column":0},"generated":{"line":1,"column":167}},{"source":"src/stages/game.ts","name":null,"original":{"line":8,"column":0},"generated":{"line":1,"column":169}},{"source":"src/stages/game.ts","name":null,"original":{"line":8,"column":0},"generated":{"line":1,"column":177}},{"source":"src/stages/game.ts","name":null,"original":{"line":10,"column":13},"generated":{"line":1,"column":197}},{"source":"src/stages/game.ts","name":null,"original":{"line":10,"column":13},"generated":{"line":1,"column":205}},{"source":"src/stages/game.ts","name":null,"original":{"line":10,"column":32},"generated":{"line":1,"column":215}},{"source":"src/stages/game.ts","name":null,"original":{"line":11,"column":2},"generated":{"line":1,"column":216}},{"source":"src/stages/game.ts","name":null,"original":{"line":11,"column":8},"generated":{"line":1,"column":221}},{"source":"src/stages/game.ts","name":null,"original":{"line":11,"column":8},"generated":{"line":1,"column":223}},{"source":"src/stages/game.ts","name":null,"original":{"line":11,"column":18},"generated":{"line":1,"column":233}},{"source":"src/stages/game.ts","name":null,"original":{"line":12,"column":2},"generated":{"line":1,"column":238}},{"source":"src/stages/game.ts","name":null,"original":{"line":12,"column":6},"generated":{"line":1,"column":243}},{"source":"src/stages/game.ts","name":null,"original":{"line":13,"column":4},"generated":{"line":1,"column":254}},{"source":"src/stages/game.ts","name":null,"original":{"line":13,"column":4},"generated":{"line":1,"column":256}},{"source":"src/stages/game.ts","name":null,"original":{"line":13,"column":10},"generated":{"line":1,"column":262}},{"source":"src/stages/game.ts","name":null,"original":{"line":13,"column":20},"generated":{"line":1,"column":270}},{"source":"src/stages/game.ts","name":null,"original":{"line":15,"column":2},"generated":{"line":1,"column":274}},{"source":"src/stages/game.ts","name":null,"original":{"line":15,"column":8},"generated":{"line":1,"column":281}},{"source":"src/stages/game.ts","name":null,"original":{"line":16,"column":4},"generated":{"line":1,"column":292}},{"source":"src/stages/game.ts","name":null,"original":{"line":16,"column":4},"generated":{"line":1,"column":294}},{"source":"src/stages/game.ts","name":null,"original":{"line":16,"column":19},"generated":{"line":1,"column":309}},{"source":"src/stages/game.ts","name":null,"original":{"line":16,"column":19},"generated":{"line":1,"column":311}},{"source":"src/stages/game.ts","name":null,"original":{"line":16,"column":31},"generated":{"line":1,"column":322}},{"source":"src/stages/game.ts","name":null,"original":{"line":18,"column":25},"generated":{"line":1,"column":333}},{"source":"src/stages/game.ts","name":null,"original":{"line":18,"column":25},"generated":{"line":1,"column":337}},{"source":"src/stages/game.ts","name":null,"original":{"line":18,"column":25},"generated":{"line":1,"column":341}},{"source":"src/stages/game.ts","name":null,"original":{"line":18,"column":25},"generated":{"line":1,"column":343}},{"source":"src/stages/game.ts","name":null,"original":{"line":18,"column":25},"generated":{"line":1,"column":345}},{"source":"src/stages/game.ts","name":null,"original":{"line":18,"column":25},"generated":{"line":1,"column":347}},{"source":"src/stages/game.ts","name":null,"original":{"line":18,"column":25},"generated":{"line":1,"column":349}},{"source":"src/stages/game.ts","name":null,"original":{"line":18,"column":31},"generated":{"line":1,"column":355}},{"source":"src/stages/game.ts","name":null,"original":{"line":18,"column":25},"generated":{"line":1,"column":363}},{"source":"src/stages/game.ts","name":null,"original":{"line":18,"column":25},"generated":{"line":1,"column":365}},{"source":"src/stages/game.ts","name":null,"original":{"line":18,"column":25},"generated":{"line":1,"column":367}},{"source":"src/stages/game.ts","name":null,"original":{"line":18,"column":25},"generated":{"line":1,"column":374}},{"source":"src/stages/game.ts","name":null,"original":{"line":18,"column":40},"generated":{"line":1,"column":378}},{"source":"src/stages/game.ts","name":null,"original":{"line":18,"column":21},"generated":{"line":1,"column":379}},{"source":"src/stages/game.ts","name":null,"original":{"line":18,"column":21},"generated":{"line":1,"column":381}},{"source":"src/stages/game.ts","name":null,"original":{"line":19,"column":13},"generated":{"line":1,"column":384}},{"source":"src/stages/game.ts","name":null,"original":{"line":22,"column":4},"generated":{"line":1,"column":393}},{"source":"src/stages/game.ts","name":null,"original":{"line":22,"column":4},"generated":{"line":1,"column":395}},{"source":"src/stages/game.ts","name":null,"original":{"line":22,"column":10},"generated":{"line":1,"column":401}},{"source":"src/stages/game.ts","name":null,"original":{"line":22,"column":17},"generated":{"line":1,"column":408}},{"source":"src/stages/game.ts","name":null,"original":{"line":24,"column":2},"generated":{"line":1,"column":418}},{"source":"src/stages/game.ts","name":null,"original":{"line":24,"column":2},"generated":{"line":1,"column":423}},{"source":"src/stages/game.ts","name":null,"original":{"line":24,"column":7},"generated":{"line":1,"column":432}},{"source":"src/stages/game.ts","name":null,"original":{"line":25,"column":4},"generated":{"line":1,"column":435}},{"source":"src/stages/game.ts","name":null,"original":{"line":25,"column":4},"generated":{"line":1,"column":437}},{"source":"src/stages/game.ts","name":null,"original":{"line":25,"column":10},"generated":{"line":1,"column":443}},{"source":"src/stages/game.ts","name":null,"original":{"line":25,"column":23},"generated":{"line":1,"column":456}},{"source":"src/stages/game.ts","name":null,"original":{"line":26,"column":4},"generated":{"line":1,"column":459}},{"source":"src/stages/game.ts","name":null,"original":{"line":26,"column":4},"generated":{"line":1,"column":461}},{"source":"src/stages/game.ts","name":null,"original":{"line":26,"column":10},"generated":{"line":1,"column":467}},{"source":"src/stages/game.ts","name":null,"original":{"line":26,"column":17},"generated":{"line":1,"column":474}},{"source":"src/stages/game.ts","name":null,"original":{"line":26,"column":22},"generated":{"line":1,"column":479}},{"source":"src/stages/game.ts","name":null,"original":{"line":28,"column":25},"generated":{"line":1,"column":482}},{"source":"src/stages/game.ts","name":null,"original":{"line":28,"column":25},"generated":{"line":1,"column":486}},{"source":"src/stages/game.ts","name":null,"original":{"line":28,"column":25},"generated":{"line":1,"column":490}},{"source":"src/stages/game.ts","name":null,"original":{"line":28,"column":25},"generated":{"line":1,"column":492}},{"source":"src/stages/game.ts","name":null,"original":{"line":28,"column":25},"generated":{"line":1,"column":494}},{"source":"src/stages/game.ts","name":null,"original":{"line":28,"column":25},"generated":{"line":1,"column":496}},{"source":"src/stages/game.ts","name":null,"original":{"line":28,"column":25},"generated":{"line":1,"column":498}},{"source":"src/stages/game.ts","name":null,"original":{"line":28,"column":31},"generated":{"line":1,"column":504}},{"source":"src/stages/game.ts","name":null,"original":{"line":28,"column":25},"generated":{"line":1,"column":512}},{"source":"src/stages/game.ts","name":null,"original":{"line":28,"column":25},"generated":{"line":1,"column":514}},{"source":"src/stages/game.ts","name":null,"original":{"line":28,"column":25},"generated":{"line":1,"column":516}},{"source":"src/stages/game.ts","name":null,"original":{"line":28,"column":25},"generated":{"line":1,"column":523}},{"source":"src/stages/game.ts","name":null,"original":{"line":28,"column":40},"generated":{"line":1,"column":527}},{"source":"src/stages/game.ts","name":null,"original":{"line":28,"column":15},"generated":{"line":1,"column":528}},{"source":"src/stages/game.ts","name":null,"original":{"line":28,"column":15},"generated":{"line":1,"column":532}},{"source":"src/stages/game.ts","name":null,"original":{"line":28,"column":21},"generated":{"line":1,"column":534}},{"source":"src/stages/game.ts","name":null,"original":{"line":28,"column":21},"generated":{"line":1,"column":536}},{"source":"src/stages/game.ts","name":null,"original":{"line":32,"column":10},"generated":{"line":1,"column":539}},{"source":"src/stages/game.ts","name":null,"original":{"line":29,"column":6},"generated":{"line":1,"column":542}},{"source":"src/stages/game.ts","name":null,"original":{"line":29,"column":13},"generated":{"line":1,"column":544}},{"source":"src/stages/game.ts","name":null,"original":{"line":29,"column":23},"generated":{"line":1,"column":554}},{"source":"src/stages/game.ts","name":null,"original":{"line":29,"column":23},"generated":{"line":1,"column":556}},{"source":"src/stages/game.ts","name":null,"original":{"line":29,"column":29},"generated":{"line":1,"column":562}},{"source":"src/stages/game.ts","name":null,"original":{"line":29,"column":36},"generated":{"line":1,"column":569}},{"source":"src/stages/game.ts","name":null,"original":{"line":30,"column":6},"generated":{"line":1,"column":577}},{"source":"src/stages/game.ts","name":null,"original":{"line":30,"column":13},"generated":{"line":1,"column":579}},{"source":"src/stages/game.ts","name":null,"original":{"line":30,"column":18},"generated":{"line":1,"column":584}},{"source":"src/stages/game.ts","name":null,"original":{"line":32,"column":10},"generated":{"line":1,"column":587}},{"source":"src/stages/game.ts","name":null,"original":{"line":32,"column":17},"generated":{"line":1,"column":589}},{"source":"src/stages/game.ts","name":null,"original":{"line":32,"column":30},"generated":{"line":1,"column":602}},{"source":"src/stages/game.ts","name":null,"original":{"line":32,"column":30},"generated":{"line":1,"column":604}},{"source":"src/stages/game.ts","name":null,"original":{"line":32,"column":36},"generated":{"line":1,"column":610}},{"source":"src/stages/game.ts","name":null,"original":{"line":33,"column":8},"generated":{"line":1,"column":618}},{"source":"src/stages/game.ts","name":null,"original":{"line":33,"column":8},"generated":{"line":1,"column":620}},{"source":"src/stages/game.ts","name":null,"original":{"line":33,"column":14},"generated":{"line":1,"column":626}},{"source":"src/stages/game.ts","name":null,"original":{"line":33,"column":21},"generated":{"line":1,"column":633}},{"source":"src/stages/game.ts","name":null,"original":{"line":33,"column":31},"generated":{"line":1,"column":641}},{"source":"src/stages/game.ts","name":null,"original":{"line":33,"column":38},"generated":{"line":1,"column":643}},{"source":"src/stages/game.ts","name":null,"original":{"line":34,"column":8},"generated":{"line":1,"column":650}},{"source":"src/stages/game.ts","name":null,"original":{"line":34,"column":8},"generated":{"line":1,"column":652}},{"source":"src/stages/game.ts","name":null,"original":{"line":34,"column":14},"generated":{"line":1,"column":658}},{"source":"src/stages/game.ts","name":null,"original":{"line":34,"column":28},"generated":{"line":1,"column":672}},{"source":"src/stages/game.ts","name":null,"original":{"line":36,"column":36},"generated":{"line":1,"column":675}},{"source":"src/stages/game.ts","name":null,"original":{"line":36,"column":12},"generated":{"line":1,"column":679}},{"source":"src/stages/game.ts","name":null,"original":{"line":36,"column":12},"generated":{"line":1,"column":681}},{"source":"src/stages/game.ts","name":null,"original":{"line":36,"column":18},"generated":{"line":1,"column":687}},{"source":"src/stages/game.ts","name":null,"original":{"line":36,"column":25},"generated":{"line":1,"column":694}},{"source":"src/stages/game.ts","name":null,"original":{"line":37,"column":10},"generated":{"line":1,"column":702}},{"source":"src/stages/game.ts","name":null,"original":{"line":37,"column":10},"generated":{"line":1,"column":704}},{"source":"src/stages/game.ts","name":null,"original":{"line":37,"column":16},"generated":{"line":1,"column":710}},{"source":"src/stages/game.ts","name":null,"original":{"line":37,"column":25},"generated":{"line":1,"column":719}},{"source":"src/stages/game.ts","name":null,"original":{"line":37,"column":25},"generated":{"line":1,"column":721}},{"source":"src/stages/game.ts","name":null,"original":{"line":42,"column":31},"generated":{"line":1,"column":744}},{"source":"src/stages/game.ts","name":null,"original":{"line":42,"column":31},"generated":{"line":1,"column":748}},{"source":"src/stages/game.ts","name":null,"original":{"line":42,"column":31},"generated":{"line":1,"column":752}},{"source":"src/stages/game.ts","name":null,"original":{"line":42,"column":31},"generated":{"line":1,"column":754}},{"source":"src/stages/game.ts","name":null,"original":{"line":42,"column":31},"generated":{"line":1,"column":756}},{"source":"src/stages/game.ts","name":null,"original":{"line":42,"column":31},"generated":{"line":1,"column":758}},{"source":"src/stages/game.ts","name":null,"original":{"line":42,"column":31},"generated":{"line":1,"column":760}},{"source":"src/stages/game.ts","name":null,"original":{"line":42,"column":37},"generated":{"line":1,"column":766}},{"source":"src/stages/game.ts","name":null,"original":{"line":42,"column":44},"generated":{"line":1,"column":773}},{"source":"src/stages/game.ts","name":null,"original":{"line":42,"column":31},"generated":{"line":1,"column":785}},{"source":"src/stages/game.ts","name":null,"original":{"line":42,"column":31},"generated":{"line":1,"column":787}},{"source":"src/stages/game.ts","name":null,"original":{"line":42,"column":31},"generated":{"line":1,"column":789}},{"source":"src/stages/game.ts","name":null,"original":{"line":42,"column":31},"generated":{"line":1,"column":796}},{"source":"src/stages/game.ts","name":null,"original":{"line":42,"column":57},"generated":{"line":1,"column":800}},{"source":"src/stages/game.ts","name":null,"original":{"line":42,"column":17},"generated":{"line":1,"column":801}},{"source":"src/stages/game.ts","name":null,"original":{"line":42,"column":17},"generated":{"line":1,"column":805}},{"source":"src/stages/game.ts","name":null,"original":{"line":42,"column":27},"generated":{"line":1,"column":807}},{"source":"src/stages/game.ts","name":null,"original":{"line":42,"column":27},"generated":{"line":1,"column":809}},{"source":"src/stages/game.ts","name":null,"original":{"line":43,"column":12},"generated":{"line":1,"column":812}},{"source":"src/stages/game.ts","name":null,"original":{"line":43,"column":12},"generated":{"line":1,"column":815}},{"source":"src/stages/game.ts","name":null,"original":{"line":43,"column":19},"generated":{"line":1,"column":817}},{"source":"src/stages/game.ts","name":null,"original":{"line":43,"column":32},"generated":{"line":1,"column":830}},{"source":"src/stages/game.ts","name":null,"original":{"line":43,"column":45},"generated":{"line":1,"column":833}},{"source":"src/stages/game.ts","name":null,"original":{"line":44,"column":10},"generated":{"line":1,"column":834}},{"source":"src/stages/game.ts","name":null,"original":{"line":44,"column":10},"generated":{"line":1,"column":836}},{"source":"src/stages/game.ts","name":null,"original":{"line":44,"column":16},"generated":{"line":1,"column":842}},{"source":"src/stages/game.ts","name":null,"original":{"line":44,"column":30},"generated":{"line":1,"column":856}},{"source":"src/stages/game.ts","name":null,"original":{"line":45,"column":10},"generated":{"line":1,"column":859}},{"source":"src/stages/game.ts","name":null,"original":{"line":45,"column":10},"generated":{"line":1,"column":861}},{"source":"src/stages/game.ts","name":null,"original":{"line":45,"column":16},"generated":{"line":1,"column":867}},{"source":"src/stages/game.ts","name":null,"original":{"line":45,"column":34},"generated":{"line":1,"column":885}},{"source":"src/stages/game.ts","name":null,"original":{"line":46,"column":10},"generated":{"line":1,"column":888}},{"source":"src/stages/game.ts","name":null,"original":{"line":51,"column":2},"generated":{"line":1,"column":898}},{"source":"src/stages/game.ts","name":null,"original":{"line":51,"column":2},"generated":{"line":1,"column":914}},{"source":"src/stages/game.ts","name":null,"original":{"line":52,"column":4},"generated":{"line":1,"column":925}},{"source":"src/stages/game.ts","name":null,"original":{"line":52,"column":21},"generated":{"line":1,"column":942}},{"source":"src/stages/game.ts","name":null,"original":{"line":52,"column":32},"generated":{"line":1,"column":952}},{"source":"src/stages/game.ts","name":null,"original":{"line":52,"column":41},"generated":{"line":1,"column":961}},{"source":"src/stages/game.ts","name":null,"original":{"line":53,"column":11},"generated":{"line":1,"column":965}},{"source":"src/stages/game.ts","name":null,"original":{"line":53,"column":11},"generated":{"line":1,"column":967}},{"source":"src/stages/game.ts","name":null,"original":{"line":53,"column":20},"generated":{"line":1,"column":974}},{"source":"src/stages/game.ts","name":null,"original":{"line":53,"column":20},"generated":{"line":1,"column":976}},{"source":"src/stages/game.ts","name":null,"original":{"line":53,"column":26},"generated":{"line":1,"column":982}},{"source":"src/stages/game.ts","name":null,"original":{"line":53,"column":32},"generated":{"line":1,"column":988}},{"source":"src/stages/game.ts","name":null,"original":{"line":53,"column":41},"generated":{"line":1,"column":995}},{"source":"src/stages/game.ts","name":null,"original":{"line":53,"column":41},"generated":{"line":1,"column":997}},{"source":"src/stages/game.ts","name":null,"original":{"line":53,"column":51},"generated":{"line":1,"column":1007}},{"source":"src/stages/game.ts","name":null,"original":{"line":56,"column":6},"generated":{"line":1,"column":1014}},{"source":"src/stages/game.ts","name":null,"original":{"line":56,"column":6},"generated":{"line":1,"column":1016}},{"source":"src/stages/game.ts","name":null,"original":{"line":56,"column":12},"generated":{"line":1,"column":1022}},{"source":"src/stages/game.ts","name":null,"original":{"line":56,"column":19},"generated":{"line":1,"column":1029}},{"source":"src/stages/game.ts","name":null,"original":{"line":56,"column":33},"generated":{"line":1,"column":1043}},{"source":"src/stages/game.ts","name":null,"original":{"line":59,"column":4},"generated":{"line":1,"column":1048}},{"source":"src/stages/game.ts","name":null,"original":{"line":59,"column":21},"generated":{"line":1,"column":1065}},{"source":"src/stages/game.ts","name":null,"original":{"line":59,"column":30},"generated":{"line":1,"column":1073}},{"source":"src/stages/game.ts","name":null,"original":{"line":59,"column":39},"generated":{"line":1,"column":1082}},{"source":"src/stages/game.ts","name":null,"original":{"line":60,"column":11},"generated":{"line":1,"column":1086}},{"source":"src/stages/game.ts","name":null,"original":{"line":60,"column":11},"generated":{"line":1,"column":1088}},{"source":"src/stages/game.ts","name":null,"original":{"line":60,"column":20},"generated":{"line":1,"column":1095}},{"source":"src/stages/game.ts","name":null,"original":{"line":60,"column":20},"generated":{"line":1,"column":1097}},{"source":"src/stages/game.ts","name":null,"original":{"line":60,"column":26},"generated":{"line":1,"column":1103}},{"source":"src/stages/game.ts","name":null,"original":{"line":60,"column":32},"generated":{"line":1,"column":1109}},{"source":"src/stages/game.ts","name":null,"original":{"line":60,"column":41},"generated":{"line":1,"column":1116}},{"source":"src/stages/game.ts","name":null,"original":{"line":60,"column":41},"generated":{"line":1,"column":1118}},{"source":"src/stages/game.ts","name":null,"original":{"line":60,"column":51},"generated":{"line":1,"column":1128}},{"source":"src/stages/game.ts","name":null,"original":{"line":63,"column":6},"generated":{"line":1,"column":1135}},{"source":"src/stages/game.ts","name":null,"original":{"line":63,"column":6},"generated":{"line":1,"column":1137}},{"source":"src/stages/game.ts","name":null,"original":{"line":63,"column":12},"generated":{"line":1,"column":1143}},{"source":"src/stages/game.ts","name":null,"original":{"line":63,"column":19},"generated":{"line":1,"column":1150}},{"source":"src/stages/game.ts","name":null,"original":{"line":63,"column":31},"generated":{"line":1,"column":1162}},{"source":"src/stages/game.ts","name":null,"original":{"line":66,"column":4},"generated":{"line":1,"column":1167}},{"source":"src/stages/game.ts","name":null,"original":{"line":66,"column":21},"generated":{"line":1,"column":1184}},{"source":"src/stages/game.ts","name":null,"original":{"line":66,"column":36},"generated":{"line":1,"column":1198}},{"source":"src/stages/game.ts","name":null,"original":{"line":66,"column":45},"generated":{"line":1,"column":1207}},{"source":"src/stages/game.ts","name":null,"original":{"line":67,"column":11},"generated":{"line":1,"column":1211}},{"source":"src/stages/game.ts","name":null,"original":{"line":67,"column":11},"generated":{"line":1,"column":1213}},{"source":"src/stages/game.ts","name":null,"original":{"line":67,"column":20},"generated":{"line":1,"column":1220}},{"source":"src/stages/game.ts","name":null,"original":{"line":67,"column":20},"generated":{"line":1,"column":1222}},{"source":"src/stages/game.ts","name":null,"original":{"line":67,"column":26},"generated":{"line":1,"column":1228}},{"source":"src/stages/game.ts","name":null,"original":{"line":67,"column":32},"generated":{"line":1,"column":1234}},{"source":"src/stages/game.ts","name":null,"original":{"line":67,"column":41},"generated":{"line":1,"column":1241}},{"source":"src/stages/game.ts","name":null,"original":{"line":67,"column":41},"generated":{"line":1,"column":1243}},{"source":"src/stages/game.ts","name":null,"original":{"line":67,"column":51},"generated":{"line":1,"column":1253}},{"source":"src/stages/game.ts","name":null,"original":{"line":70,"column":6},"generated":{"line":1,"column":1260}},{"source":"src/stages/game.ts","name":null,"original":{"line":70,"column":6},"generated":{"line":1,"column":1262}},{"source":"src/stages/game.ts","name":null,"original":{"line":70,"column":12},"generated":{"line":1,"column":1268}},{"source":"src/stages/game.ts","name":null,"original":{"line":70,"column":19},"generated":{"line":1,"column":1275}},{"source":"src/stages/game.ts","name":null,"original":{"line":70,"column":35},"generated":{"line":1,"column":1291}},{"source":"src/stages/game.ts","name":null,"original":{"line":73,"column":4},"generated":{"line":1,"column":1296}},{"source":"src/stages/game.ts","name":null,"original":{"line":73,"column":21},"generated":{"line":1,"column":1313}},{"source":"src/stages/game.ts","name":null,"original":{"line":73,"column":36},"generated":{"line":1,"column":1327}},{"source":"src/stages/game.ts","name":null,"original":{"line":73,"column":45},"generated":{"line":1,"column":1336}},{"source":"src/stages/game.ts","name":null,"original":{"line":74,"column":11},"generated":{"line":1,"column":1340}},{"source":"src/stages/game.ts","name":null,"original":{"line":74,"column":11},"generated":{"line":1,"column":1342}},{"source":"src/stages/game.ts","name":null,"original":{"line":74,"column":20},"generated":{"line":1,"column":1349}},{"source":"src/stages/game.ts","name":null,"original":{"line":74,"column":20},"generated":{"line":1,"column":1351}},{"source":"src/stages/game.ts","name":null,"original":{"line":74,"column":26},"generated":{"line":1,"column":1357}},{"source":"src/stages/game.ts","name":null,"original":{"line":74,"column":32},"generated":{"line":1,"column":1363}},{"source":"src/stages/game.ts","name":null,"original":{"line":74,"column":41},"generated":{"line":1,"column":1370}},{"source":"src/stages/game.ts","name":null,"original":{"line":74,"column":41},"generated":{"line":1,"column":1372}},{"source":"src/stages/game.ts","name":null,"original":{"line":74,"column":51},"generated":{"line":1,"column":1382}},{"source":"src/stages/game.ts","name":null,"original":{"line":77,"column":6},"generated":{"line":1,"column":1389}},{"source":"src/stages/game.ts","name":null,"original":{"line":77,"column":6},"generated":{"line":1,"column":1391}},{"source":"src/stages/game.ts","name":null,"original":{"line":77,"column":12},"generated":{"line":1,"column":1397}},{"source":"src/stages/game.ts","name":null,"original":{"line":77,"column":19},"generated":{"line":1,"column":1404}},{"source":"src/stages/game.ts","name":null,"original":{"line":77,"column":31},"generated":{"line":1,"column":1416}}],"sources":{"src/stages/game.ts":"import { Soldier } from \"../actors/actor/players/soldier\";\r\nimport { Heavy } from \"../actors/actor/players/heavy\";\r\nimport { Scout } from \"../actors/actor/players/scout\";\r\nimport { state } from \"../state\";\r\nimport { foreground, background } from \"../canvas\";\r\nimport { Stage, StageType } from \"../stage\";\r\nimport { ScoreScreenStage } from \"./score-screen\";\r\nimport { fillBackground } from \"../utils/context\";\r\n\r\nexport const GameStage: Stage = {\r\n  type: StageType.GAME,\r\n  init() {\r\n    state.zombies = [];\r\n  },\r\n  render() {\r\n    fillBackground(background, \"#4dbd33\");\r\n\r\n    for (const zombie of state.zombies) {\r\n      zombie.render();\r\n    }\r\n\r\n    state.player.render();\r\n  },\r\n  next(dt: number) {\r\n    state.createZombie(dt);\r\n    state.player.next(dt);\r\n\r\n    for (const zombie of state.zombies) {\r\n      zombie.setFacing(state.player.coords);\r\n      zombie.next(dt);\r\n\r\n      if (zombie.collidesWith(state.player)) {\r\n        state.player.health -= zombie.damage;\r\n        state.destroyZombie(zombie);\r\n\r\n        if (state.player.health === 0) {\r\n          state.setStage(ScoreScreenStage);\r\n        }\r\n        continue;\r\n      }\r\n\r\n      for (const projectile of state.player.projectiles) {\r\n        if (zombie.collidesWith(projectile)) {\r\n          state.destroyZombie(zombie);\r\n          state.destroyProjectile(projectile);\r\n          break;\r\n        }\r\n      }\r\n    }\r\n  },\r\n  listenForEvents() {\r\n    addEventListener(\"keydown\", function(event: KeyboardEvent) {\r\n      if (!state && state.stage.type === StageType.GAME) {\r\n        return;\r\n      }\r\n      state.player.handleKeyDown(event);\r\n    });\r\n\r\n    addEventListener(\"keyup\", function(event: KeyboardEvent) {\r\n      if (!state && state.stage.type === StageType.GAME) {\r\n        return;\r\n      }\r\n      state.player.handleKeyUp(event);\r\n    });\r\n\r\n    addEventListener(\"pointermove\", function(event: MouseEvent) {\r\n      if (!state && state.stage.type === StageType.GAME) {\r\n        return;\r\n      }\r\n      state.player.handleMouseMove(event);\r\n    });\r\n\r\n    addEventListener(\"pointerdown\", function(event: MouseEvent) {\r\n      if (!state && state.stage.type === StageType.GAME) {\r\n        return;\r\n      }\r\n      state.player.handleClick(event);\r\n    });\r\n  }\r\n};\r\n"},"lineCount":null}},"error":null,"hash":"971a49800acf99dca4b3e1e4ba86aa84","cacheData":{"env":{}}}